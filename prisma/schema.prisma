generator client {
  provider = "prisma-client-js"
  output   = "./src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int         @id @default(autoincrement())
  nome      String
  email     String      @unique
  senha     String
  tipo      TipoUsuario @default(cliente)
  ativo     Boolean     @default(true)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt

  @@map("users")
}

model Imovel {
  id              Int    @id @default(autoincrement())
  foto            String
  titulo          String
  localizacao     String
  valor           Float
  iptu            Float
  metrosQuadrados Float
  quartos         Int
  banheiros       Int
  garagens        Int
  ambiente        String
  conveniencias   String
  descricao       String

  @@map("imoveis")
}

model Agendamento {
  id          Int               @id @default(autoincrement())
  usuarioId   Int
  imovelId    Int
  dataVisita  DateTime           @db.Date
  horario     String
  telefone    String?           @db.VarChar(20)
  observacoes String?
  status      StatusAgendamento @default(pendente)
  createdAt   DateTime          @default(now())

  @@index([imovelId], map: "agendamentos_imovelId_fkey")
  @@index([usuarioId], map: "agendamentos_usuarioId_fkey")
  @@map("agendamentos")
}

model Favorito {
  id        Int      @id @default(autoincrement())
  usuarioId Int
  imovelId  Int
  createdAt DateTime @default(now())

  @@unique([usuarioId, imovelId])
  @@index([imovelId], map: "favoritos_imovelId_fkey")
  @@map("favoritos")
}

enum TipoUsuario {
  adm
  cliente
}

enum StatusAgendamento {
  pendente
  confirmado
  recusado
}
